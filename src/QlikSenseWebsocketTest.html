<html>
	<head>
<script src="https://rawgit.com/davidshimjs/qrcodejs/master/qrcode.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

<!-- JQuery -->
<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>


<style>
	h1 {
		font-size: 26px;
	}
	h2 {
		font-size: 16px;
	}
	#Timing {
		padding-left: 10px;
	}
	#UpdateLastMsgErrors {
		padding-top: 10px;
	}
	div.alert {
		padding: 7px;
	}
	.flex-container {
		display: flex;
	}
	.flex-grow {
		flex-grow: 1;
	}
	.credits {
		font-size: 10px;
		margin-top: 20px;
	}
</style>
</head>
<body>
  <div>
    <div>
      <div style="float: left; margin: 20px 20px 20px 20px;">
        <h1>Qlik Sense Websocket Connectivity Tester</h1>
      </div>
      <div id="qrcode" style="float: right; margin: 20px 20px 20px 20px;"></div>
      <script type="text/javascript">
        var qrcode = new QRCode("qrcode", {
          text: window.location.href.toString(),
          width: 128,
          height: 128,
          colorDark: "#000000",
          colorLight: "#ffffff",
          correctLevel: QRCode.CorrectLevel.H
        });
      </script>
    </div>
  </div>
  <div style="clear: both">
    <div id="AuthenticatedDiv" class="alert alert-danger" role="alert">
      <span id="AuthenticatedIcon" class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
      <span id="Authenticated">Authentication</span>
    </div>
    <div id="ConnectedWSSDiv" class="alert alert-danger" role="alert">
      <span id="ConnectedWSSIcon" class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
      <span id="ConnectedWSS">Connect secure websocket</span>
    </div>
    <div id="ProductVersionWSSDiv" class="alert alert-danger" role="alert">
      <span id="ProductVersionWSSIcon" class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
      <span id="ProductVersionWSS">Product version collected through secure websocket</span>
    </div>
    <div id="DocListWSSDiv" class="alert alert-danger" role="alert">
      <span id="DocListWSSIcon" class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
      <span id="DocListWSS">Application list through secure websocket</span>
    </div>
    <div id="ConnectedWSDiv" class="alert alert-danger" role="alert">
      <span id="ConnectedWSIcon" class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
      <span id="ConnectedWS">Connect websocket</span>
    </div>
    <div id="ProductVersionWSDiv" class="alert alert-danger" role="alert">
      <span id="ProductVersionWSIcon" class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
      <span id="ProductVersionWS">Product version collected through websocket</span>
    </div>
    <div id="DocListWSDiv" class="alert alert-danger" role="alert">
      <span id="DocListWSIcon" class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
      <span id="DocListWS">Application list through websocket</span>
	</div>
	<div class="flex-container">
		<div id="ResponsetimeChart" class="flex-grow">
			<h2>A) Websocket with continous activity</h2>
			<canvas id="Chart" style="width:50%; height:150px"></canvas>
			<div style="font-size:smaller">Websocket ping response (ms)</div>
		</div>
		<div class="flex-grow">			
			<h2>B) No activity</h2>
			<div id="clock">
				<h3>00:00:01</h3>
			</div>
		</div>
		<div class="flex-grow">			
			<h2>C) Websocket with long idle periods</h2>
			<div id="testbed"></div>
		</div>
	</div>

  </div>
</body>

<script src="..\bundle.js"></script>
</html>